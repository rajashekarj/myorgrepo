<template>

   <span class="InlineEditMessage">{INLINE_EDIT_MESSAGE}</span>
   <!--Custom buttons starts here -->
   <div class="slds-align_absolute-center slds-m-top_small NonLMCustomButtonsStyle">
      <lightning-button label="Edit" onclick={navigateToEditCase}></lightning-button>&nbsp;
      <!--  If community users logged in then 'hideButtonsForCommunity' set to false and it hides all the buttons 
         except 'Edit' & 'Add/Delete Dispensers' -->
      <!--buttonEditDeleteCloneForNACase flag is used to contorl the visibilty of the 'Delete' and 'clone' buttons for NA
      for North american case buttons will apper on starting wheres for Non-north american cases buttons appear on last-->   
      <template if:true={hideButtonsForCommunity}>
         <template if:true={buttonEditDeleteCloneForNACase}>
            <lightning-button label="Delete" onclick={openDeleteCaseConfirmModal}></lightning-button>&nbsp;
            <lightning-button label="Clone" onclick={navigateToCloneCase}></lightning-button>&nbsp;
         </template>
      </template>
      <template if:true={hideButtonsForCommunity}>
         <template if:true={buttonEMTFlag}>
            <lightning-button label="Escalate to EMT" onclick={escalateToEMT} disabled={isEscalateToEMTButtonDisabled}>
            </lightning-button>&nbsp;
         </template>
         <template if:true={buttonGCFlag}>
            <lightning-button label="Escalate to GC" onclick={escalateToGC}></lightning-button>&nbsp;
         </template>
         <template if:true={buttonFactFlag}>
            <lightning-button label="Escalate to FACT" onclick={escalatetoFACT}></lightning-button>&nbsp;
         </template>
      </template>
      <lightning-button label="Add/Delete Dispensers" onclick={getDispensersListModal}></lightning-button>&nbsp;
      <template if:true={hideButtonsForCommunity}>
         <template if:true={buttonAccountTeamMemberFlag}>
            <lightning-button label="Select Account Team Member" onclick={getAccountTeamMembers}></lightning-button>
            &nbsp;
         </template>
      </template>
      <template if:true={hideButtonsForCommunity}>
         <template if:false={buttonEditDeleteCloneForNACase}>

            <lightning-button label="Clone" onclick={navigateToCloneCase}></lightning-button>&nbsp;
            <lightning-button label="Delete" onclick={openDeleteCaseConfirmModal}></lightning-button>
         </template>

      </template>


   </div>
   <!--Custom buttons ends here -->
   <!--Modal for selecting Account Team Members starts here -->
   <template if:true={accountTeamMemberModal}>
      <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
         aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
         <div class="slds-modal__container">
            <!-- modal header starts here -->
            <header class="slds-modal__header">
               <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close"
                  onclick={closeModal}>
                  <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small">
                  </lightning-icon>
                  <span class="slds-assistive-text">Close</span>
               </button>
               <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">Select Account Team Members
               </h2>
            </header>
            <!-- modal header ends here -->
            <!-- modal body starts -->
            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">

               <table class="slds-table slds-table--bordered slds-table--striped">
                  <thead>
                     <th>Select Email</th>
                     <th>User Name</th>
                     <th>User Role</th>
                     <th>Email ID</th>
                  </thead>
                  <tbody>
                     <template if:true={AccountTeamMembersCheck}>
                        <template for:each={accountTeamMembersList} for:item="atDetail">
                           <tr key={atDetail.Id}>
                              <td>
                                 <div if:true={atDetail.userPresent}>
                                    <lightning-input type="Checkbox" data-item={atDetail.Id}
                                       value={atDetail.userPresent} data-id="selectedAT" checked></lightning-input>
                                 </div>
                                 <div if:false={atDetail.userPresent}>
                                    <lightning-input type="Checkbox" data-item={atDetail.Id}
                                       value={atDetail.userPresent} data-id="selectedAT">
                                    </lightning-input>
                                 </div>

                              </td>
                              <td>
                                 <lightning-formatted-text value={atDetail.userName}>
                                 </lightning-formatted-text>
                              </td>
                              <td>

                                 <lightning-formatted-text value={atDetail.userRole}>
                                 </lightning-formatted-text>

                              </td>
                              <td>
                                 <lightning-formatted-text value={atDetail.userEmailId}>
                                 </lightning-formatted-text>
                              </td>
                           </tr>

                        </template>

                     </template>
                  </tbody>
               </table>

            </div>
            <!-- modal body ends -->
            <!-- modal footer starts-->
            <footer class="slds-modal__footer">
               <button class="slds-button slds-button--neutral" onclick={closeModal}>Cancel</button>
               &nbsp;&nbsp;
               <button class="slds-button slds-button_brand" onclick={saveAccountTeamMembers}
                  disabled={isPopupSubmitButtonDisabled}>Save</button>
            </footer>
            <!-- modal footer ends-->
         </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open"></div>
   </template>
   <!--Modal for selecting Account Team Members ends here -->

   <!--Modal for selecting Dispensers starts here-->

   <template if:true={addDeleteDispenserModal}>
      <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
         aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
         <div class="slds-modal__container modal-lg">
            <!-- modal header start -->
            <header class="slds-modal__header">
               <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close"
                  onclick={closeDispensersModal}>
                  <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small">
                  </lightning-icon>
                  <span class="slds-assistive-text">Close</span>
               </button>
               <h2 id="modal-heading-02" class="slds-text-heading_medium slds-hyphenate">Dispensers List
               </h2>
            </header>
            <!-- modal body starts-->
            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-2">
               <lightning-input type="Checkbox" onclick={selectAllDispensersCheckBox} label="Select All Dispensers"
                  data-id="selectAllDispCheckBox">
               </lightning-input>
               <table class="slds-table slds-table--bordered slds-table--striped">
                  <thead>
                     <th></th>
                     <th>Outlet Dispensers Name</th>
                     <th>Status</th>
                     <th>MDM Registered Date</th>
                     <th>JDE Serial Number/Asset Tag</th>
                     <th>Equipment Type</th>
                     <th>Active (A) / Inactive (I)</th>
                  </thead>
                  <tbody>
                     <template if:true={OutletDispensersCheck}>
                        <template for:each={outletDispensersDetails} for:item="dis">
                           <tr key={dis.Id}>
                              <td>
                                 <div if:true={dis.checked}>
                                    <lightning-input type="Checkbox" data-item={dis.dispenser.FS_Serial_Number2__c}
                                       value={dis.checked} title={dis.dispenser.FS_Serial_Number2__c}
                                       data-id="selectedZPLs" checked disabled={dis.disableDispenser}></lightning-input>
                                 </div>
                                 <div if:false={dis.checked}>
                                    <lightning-input type="Checkbox" data-item={dis.dispenser.FS_Serial_Number2__c}
                                       value={dis.checked} title={dis.dispenser.FS_Serial_Number2__c}
                                       data-id="selectedZPLs" disabled={dis.disableDispenser}>
                                    </lightning-input>
                                 </div>

                              </td>
                              <td>
                                 <lightning-formatted-text value={dis.dispenser.Name}>
                                 </lightning-formatted-text>
                              </td>
                              <td>

                                 <lightning-formatted-text value={dis.dispenser.FS_Status__c}>
                                 </lightning-formatted-text>

                              </td>
                              <td>
                                 <lightning-formatted-text value={dis.dispenser.FS_Date_Status__c}>
                                 </lightning-formatted-text>
                              </td>
                              <td>
                                 <lightning-formatted-text value={dis.dispenser.FS_Serial_Number2__c}>
                                 </lightning-formatted-text>
                              </td>
                              <td>
                                 <lightning-formatted-text value={dis.dispenser.FS_Equip_Type__c}>
                                 </lightning-formatted-text>
                              </td>
                              <td>
                                 <div if:true={dis.dispenser.FS_IsActive__c}>
                                    <lightning-input type="Checkbox" value={dis.dispenser.FS_IsActive__c} checked
                                       disabled></lightning-input>
                                 </div>
                                 <div if:false={dis.dispenser.FS_IsActive__c}>
                                    <lightning-input type="Checkbox" value={dis.dispenser.FS_IsActive__c} disabled>
                                    </lightning-input>
                                 </div>
                              </td>
                           </tr>

                        </template>

                     </template>
                  </tbody>
               </table>

            </div>
            <!-- modal body ends-->
            <!-- modal footer start-->
            <footer class="slds-modal__footer">
               <button class="slds-button slds-button--neutral" onclick={closeDispensersModal}>Cancel</button>
               &nbsp;&nbsp;
               <button class="slds-button slds-button_brand" onclick={saveDispensersList}
                  disabled={isPopupSubmitButtonDisabled}>Select Dispensers</button>
            </footer>
            <!-- modal footer ends-->
         </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open"></div>
   </template>
   <!--Modal for selecting Dispensers ends here-->

   <!--Modal for delete Non LM case starts here-->

   <template if:true={deleteCaseModal}>
      <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
         aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
         <div class="slds-modal__container">
            <!-- modal header start -->
            <header class="slds-modal__header">
               <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse" title="Close"
                  onclick={closeDeleteCaseModal}>
                  <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse" size="small">
                  </lightning-icon>
                  <span class="slds-assistive-text">Close</span>
               </button>
               <h2 id="modal-heading-03" class="slds-text-heading_medium slds-hyphenate">Delete Case
               </h2>
            </header>
            <!-- modal header ends -->
            <!-- modal body start -->
            <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-3">
               <center> Are you sure you want to delete this Case?</center>
            </div>
            <!-- modal body ends -->
            <!-- modal footer start-->
            <footer class="slds-modal__footer">
               <button class="slds-button slds-button--neutral" onclick={closeDeleteCaseModal}>Cancel</button>
               &nbsp;&nbsp;
               <button class="slds-button slds-button_brand" onclick={navigateToDeleteCase}
                  disabled={isPopupSubmitButtonDisabled}>Delete</button>
            </footer>
            <!-- modal footer ends-->
         </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open"></div>
   </template>

   <!--Modal for delete Non LM case ends here-->
   <!--Modal for custom alert messages starts here -->
   <template if:true={openAlertModal}>
      <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
         aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
         <div class="slds-modal__container alertModalContainer">
            <!-- modal header start -->
            <header class="slds-modal__header alertModalHeader">
               <h2 id="modal-heading-04" class="alertModalHeaderText">Error</h2>
            </header>
            <!-- modal header ends -->
            <!-- modal body start -->
            <div class="slds-modal__content slds-p-around_medium alertMessageText" id="modal-content-id-4">
               {alertMesssage}
            </div>
            <!-- modal body ends -->
            <!-- modal footer start-->
            <footer class="slds-modal__footer alertModalFooter">
               <button class="slds-button slds-button_neutral" onclick={closeAlertModalMethod}>Close</button>
            </footer>
            <!-- modal footer ends-->
         </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open"></div>
   </template>
   <!--Modal for custom alert messages ends here -->
</template>