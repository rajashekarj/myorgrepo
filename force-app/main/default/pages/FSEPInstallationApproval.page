<apex:page controller="FSEPInstallationApproval">
    
    <apex:form id="frm">
        <apex:pageMessages ></apex:pageMessages>
        <apex:pageBlock title="Installation Approval" id="pgBlockInstall">    
            <apex:pageBlockSection columns="1">
                <apex:pageBlockTable value="{!installWrapperList}" var="inst">
                    
                    <apex:column >
                        <apex:facet name="header">
                            Select All <br/>
                            <input class='selectInput' onchange="toggleCheck(this)" type="checkbox" />
                        </apex:facet>
                        <apex:inputCheckbox styleClass="selectInput"  value="{!inst.isChecked}"/>
                    </apex:column>
                    
                    <apex:column headerValue="Name" >
                        <apex:outputLink value="/{!inst.installation.id}" target="_blank">
                        <apex:outputField value="{!inst.installation.name}"/>
                    </apex:outputLink>
                    </apex:column>
                    
                    <apex:column headerValue="Platform Type/s" value="{!inst.installation.Type_of_Dispenser_Platform__c}" /> 			
                    
                    <apex:column headerValue="Outlet" value="{!inst.installation.FS_Outlet__c}" />
                    
                    <apex:column headerValue="Execution Plan Final Approval (PM)" value="{!inst.installation.FS_Execution_Plan_Final_Approval_PM__c}"/>
                    
                    <apex:column headerValue="Ready for PM approval" value="{!inst.installation.FS_Ready_For_PM_Approval__c}"/>
                    
                    <apex:column headerValue="Reason for PM Installation Rejection">
                        <apex:inputField styleClass="reason" value="{!inst.installation.FS_Reason_for_Installation_Rejection__c}" />
                    </apex:column>
                    
                    <apex:column headerValue="EP Approval request submitted by" value="{!inst.installation.FS_Approval_request_submitted_by__c}"/>
                    
                    <apex:column headerValue="EP Approval request submitted date time" value="{!inst.installation.FS_Approval_request_submitted_date_time__c}"/>
                    
                </apex:pageBlockTable>
            </apex:pageBlockSection>  
            
            <div align="center">        
                <apex:outputPanel style="text-align: center" >
                    <apex:commandButton value="Approve" action="{!approveInstallationPM}"  disabled="{!conditionCheck}" />
                    <apex:commandButton value="Reject" action="{!rejectInstallationPM}" disabled="{!conditionCheck}"/>
                     <apex:commandButton value="Cancel" action="{!cancel}" />
                </apex:outputPanel>         
            </div>
            
            <apex:outputPanel rendered="{!conditionCheck}">
                <apex:outputLabel style="color:red;font-weight:bold;">No Records to display</apex:outputLabel>
            </apex:outputPanel>
            
        </apex:pageBlock>        
    </apex:form>
    
    <script>
    function toggleCheck(id) {
        var inputList = document.getElementsByClassName('selectInput');
        for(var i=0;i<inputList.length;i++)
            document.getElementsByClassName('selectInput')[i].checked = id.checked;
    }    
    </script>
</apex:page>